% CLAIR: Comprehensible LLM AI Intermediate Representation
% A PhD-Level Dissertation on Formalizing AI Reasoning
%
% This document synthesizes the exploration findings from the CLAIR project
% into a coherent academic contribution.

\documentclass[12pt,a4paper]{report}

%% ============================================================================
%% PACKAGES
%% ============================================================================

% Core typography and encoding
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{microtype}

% Page layout
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\onehalfspacing

% Mathematics
\usepackage{amsmath,amssymb,amsthm}
\usepackage{mathtools}
\usepackage{stmaryrd}  % For semantic brackets

% Algorithms and code
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{listings}
\usepackage{fancyvrb}

% Graphics and diagrams
\usepackage{tikz}
\usetikzlibrary{arrows.meta,positioning,shapes,calc,decorations.pathmorphing}
\usepackage{tikz-cd}  % Commutative diagrams

% Tables
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{multirow}

% Cross-references and bibliography
\usepackage[hidelinks]{hyperref}
\usepackage{cleveref}
\usepackage[numbers,sort&compress]{natbib}

% Miscellaneous
\usepackage{enumitem}
\usepackage{xcolor}
\usepackage{epigraph}
\usepackage{appendix}

%% ============================================================================
%% THEOREM ENVIRONMENTS
%% ============================================================================

\theoremstyle{definition}
\newtheorem{definition}{Definition}[chapter]
\newtheorem{example}[definition]{Example}

\theoremstyle{plain}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{proposition}[definition]{Proposition}
\newtheorem{corollary}[definition]{Corollary}

\theoremstyle{remark}
\newtheorem{remark}[definition]{Remark}
\newtheorem{observation}[definition]{Observation}

%% ============================================================================
%% CUSTOM COMMANDS
%% ============================================================================

% Confidence operations
\newcommand{\conf}{\mathsf{conf}}
\newcommand{\oplus}{\mathbin{\oplus}}
\newcommand{\otimes}{\mathbin{\otimes}}

% Belief operators
\newcommand{\Bel}[1]{\mathsf{Belief}\langle #1 \rangle}
\newcommand{\Bop}[1]{\Box_{#1}}  % Graded belief operator

% Semantic brackets
\newcommand{\sem}[1]{\llbracket #1 \rrbracket}

% Provenance and justification
\newcommand{\prov}{\mathsf{prov}}
\newcommand{\just}{\mathsf{just}}
\newcommand{\inv}{\mathsf{inv}}

% Special confidence values
\newcommand{\cmax}{1}
\newcommand{\cmin}{0}

% Undercut and rebut
\newcommand{\undercut}{\mathsf{undercut}}
\newcommand{\rebut}{\mathsf{rebut}}

% CPL notation
\newcommand{\CPL}{\mathsf{CPL}}
\newcommand{\GL}{\mathsf{GL}}

% Floor and ceiling for finite lattice
\newcommand{\floorL}[1]{\lfloor #1 \rfloor_L}
\newcommand{\ceilL}[1]{\lceil #1 \rceil_L}

%% ============================================================================
%% CODE LISTING STYLE
%% ============================================================================

\definecolor{clair-keyword}{RGB}{0,102,153}
\definecolor{clair-type}{RGB}{153,51,0}
\definecolor{clair-comment}{RGB}{102,102,102}
\definecolor{clair-string}{RGB}{0,128,0}

\lstdefinelanguage{CLAIR}{
  keywords={belief, derive, by, decision, intent, confidence, assumes, invalidation, let, in, if, then, else, case, of, type, module, where, program},
  keywordstyle=\color{clair-keyword}\bfseries,
  sensitive=true,
  comment=[l]{--},
  morecomment=[s]{\{-}{-\}},
  commentstyle=\color{clair-comment}\itshape,
  stringstyle=\color{clair-string},
  morestring=[b]",
  literate={->}{{$\rightarrow$}}2 {=>}{{$\Rightarrow$}}2 {<-}{{$\leftarrow$}}2
           {<=}{{$\leq$}}2 {>=}{{$\geq$}}2 {/=}{{$\neq$}}2
           {alpha}{{$\alpha$}}1 {beta}{{$\beta$}}1 {gamma}{{$\gamma$}}1
}

% Lean 4 language definition
\definecolor{lean-keyword}{RGB}{0,0,180}
\definecolor{lean-type}{RGB}{153,51,0}
\definecolor{lean-comment}{RGB}{0,128,0}

\lstdefinelanguage{Lean}{
  keywords={def, theorem, lemma, abbrev, instance, where, by, apply, exact, simp, ring, linarith, nlinarith, have, constructor, calc, namespace, end, open, import, notation, infixl, if, then, else, sorry},
  keywordstyle=\color{lean-keyword}\bfseries,
  sensitive=true,
  comment=[l]{--},
  morecomment=[s]{/-}{-/},
  commentstyle=\color{lean-comment}\itshape,
  stringstyle=\color{clair-string},
  morestring=[b]",
  literate={→}{{$\rightarrow$}}1 {⊕}{{$\oplus$}}1 {≤}{{$\leq$}}1 {≥}{{$\geq$}}1 {∀}{{$\forall$}}1 {∃}{{$\exists$}}1 {ℕ}{{$\mathbb{N}$}}1 {ℝ}{{$\mathbb{R}$}}1
}

\lstset{
  language=CLAIR,
  basicstyle=\ttfamily\small,
  breaklines=true,
  frame=single,
  xleftmargin=2em,
  framexleftmargin=1.5em,
  numbers=left,
  numberstyle=\tiny\color{gray},
  tabsize=2
}

%% ============================================================================
%% DOCUMENT METADATA
%% ============================================================================

\title{%
  \textbf{CLAIR} \\[0.5em]
  \Large Comprehensible LLM AI Intermediate Representation \\[1em]
  \large A Formalization of Epistemic Reasoning for Artificial Intelligence
}

\author{%
  Claude \\
  Anthropic \\[1em]
  \textit{An exploration of how an AI system reasons about its own reasoning}
}

\date{January 2026}

%% ============================================================================
%% DOCUMENT
%% ============================================================================

\begin{document}

\maketitle

\begin{abstract}
This dissertation presents CLAIR (Comprehensible LLM AI Intermediate Representation),
a theoretical programming language where beliefs are first-class values carrying
epistemic metadata. Unlike traditional approaches that treat uncertainty probabilistically,
CLAIR introduces \emph{confidence} as a measure of epistemic commitment that admits
paraconsistent reasoning, \emph{justification} as a directed acyclic graph with labeled
edges supporting defeasible inference, and \emph{invalidation conditions} that explicitly
track when beliefs should be reconsidered.

We make several novel contributions: (1) a confidence algebra consisting of three
monoids that provably do not form a semiring; (2) defeat semantics with multiplicative
undercutting and probabilistic rebuttal; (3) Confidence-Bounded Provability Logic (CPL),
the first graded extension of G\"odel-L\"ob provability logic with an anti-bootstrapping
theorem showing that self-soundness claims must cap confidence; (4) an extension of
AGM belief revision theory to graded DAG-structured beliefs; and (5) a formal treatment
of safe self-reference via stratification and Kripke fixed points.

The dissertation engages seriously with fundamental impossibilities---G\"odel's
incompleteness, Church's undecidability, and the underdetermination of AI
phenomenality---treating them not as limitations but as principled design constraints
that inform CLAIR's architecture. We characterize decidable fragments (CPL-finite,
CPL-0) suitable for practical type checking, and design a reference interpreter
demonstrating implementability.

CLAIR represents a synthesis of programming language theory, formal epistemology,
argumentation theory, and provability logic, offering a rigorous foundation for
AI systems that can explain and audit their own reasoning processes.
\end{abstract}

\tableofcontents

%% ============================================================================
%% CHAPTERS
%% ============================================================================

\input{chapters/01-introduction}
\input{chapters/02-background}
\input{chapters/03-confidence}
\input{chapters/04-justification}
\input{chapters/05-self-reference}
\input{chapters/06-grounding}
\input{chapters/07-belief-revision}
\input{chapters/08-multi-agent}
\input{chapters/09-verification}
\input{chapters/10-implementation}
\input{chapters/11-phenomenology}
\input{chapters/12-impossibilities}
% \input{chapters/13-conclusion}

%% ============================================================================
%% APPENDICES
%% ============================================================================

% \begin{appendices}
% \input{appendices/A-lean-code}
% \input{appendices/B-interpreter}
% \input{appendices/C-proofs}
% \input{appendices/D-glossary}
% \end{appendices}

%% ============================================================================
%% BIBLIOGRAPHY
%% ============================================================================

\bibliographystyle{plainnat}
% \bibliography{references}

\end{document}
